{% extends "layout-drawer.html" %}

{% block page_content %}
  <div class="page-header">
    <h2>{{ supplier.rz }}{% if supplier.name %} <small>{{ supplier.name }}</small>{% endif %}</h2>
  </div>
  <div>
    <ul class="nav nav-pills" role="tablist">
      <li role="presentation" class="active">
        <a href="#documents" role="tab" data-toggle="pill">Facturas</a>
      </li>
      <li role="presentation">
        <a href="#orders" role="tab" data-toggle="pill">Pedidos</a>
      </li>
      <li role="presentation">
        <a href="#detail" role="tab" data-toggle="pill">Datos</a>
      </li>
      <li role="presentation">
        <a href="#contacts" role="tab" data-toggle="pill">Contactos</a>
      </li>
    </ul>
    <!-- panes -->
    <div class="tab-content">
      <div role="tabpanel" class="tab-pane active" id="documents">
        <table class="table table-hover table-condensed">
          <thead>
            <tr>
              <th class="col-md-1 issue-date">Emisión</th>
              <th class="col-md-4 number">Documento</th>
              <th class="col-md-2 state">Estado</th>
              <th class="col-md-1 expire-date">Vencimiento</th>
              <th class="col-md-2 balance">Adeudado</th>
              <th class="col-md-2 total">Total</th>
            </tr>
          </thead>
          <tbody>
            {% for document in supplier.documents %}
              <tr>
                <td class="issue-date">{{ document.issue_date|dateformat }}</td>
                <td class="number"><strong>{{ document.full_desc }}</strong></td>
                <td class="state">{{ document.status }}</td>
                <td class="expire-date">{{ document.expiration_date|dateformat }}</td>
                <td class="balance">{% if document.doc_status in ('STATUS_PENDING', 'STATUS_EXPIRED') and document.balance %}{{ document.balance|moneyfmt(curr='$ ') }}{% else %}&mdash;{% endif %}</td>
                <td class="total">{{ document.total|moneyfmt(curr='$ ') }}</td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <div role="tabpanel" class="tab-pane" id="orders">
        Orders panel
      </div>
      <div role="tabpanel" class="tab-pane" id="detail">
        <div class="row">
          {% with address = supplier.address|first %}
          {% if address %}
          <div class="col-md-6">
            <h4 class="dl-header">Dirección</h4>
            <dl class="dl-horizontal addresses">
              <dt>Calle</dt>
              <dd>{{ address.street }} {{ address.streetnumber|d('', true) }}</dd>
              <dt>Localidad</dt>
              <dd>{{ address.city|d('-', true) }}</dd>
              <dt>Código postal</dt>
              <dd>{{ address.zip_code|d('-', true) }}</dd>
              <dt>Provincia</dt>
              <dd>{{ address.province }}</dd>
            </dl>
          </div>
          {% endif %}
          {% endwith %}
          {% if supplier.fiscal_data %}
          <div class="col-md-6">
            <h4 class="dl-header">Datos Fiscales</h4>
            <dl class="dl-horizontal fiscal">
              <dt>CUIT</dt>
              <dd>{{ supplier.fiscal_data.cuit|cuitfmt }}</dd>
              <dt>IVA</dt>
              <dd>{{ supplier.fiscal_data.type|d('-', true) }}</dd>
              <dt>Ing. Brutos</dt>
              <dd>{{ supplier.fiscal_data.iibb|d('-', true) }}</dd>
            </dl>
          </div>
          {% endif %}
        </div>
        <div class="row">
          {% if supplier.phone %}
          <div class="col-md-6">
              <h4 class="dl-header">Teléfonos</h4>
              <dl class="dl-horizontal phone">
                {% for phone in supplier.phone %}
                  <dt>{{ phone.phone_type }}</dt>
                  <dd>{{ phone.number }}</dd>
                {% endfor %}
              </dl>
          </div>
          {% endif %}
          <div class="col-md-6">
            <h4 class="dl-header">Terminos Comerciales</h4>
            <dl class="dl-horizontal terms">
              <dt>Plazo de pago</dt>
              <dd>{{ supplier.payment_term|d('-', true) }}</dd>
              <dt>Tiempo de entrega</dt>
              <dd>{{ supplier.leap_time|d('-', true) }}</dd>
            </dl>
          </div>
        </div>
      </div>
      <div role="tabpanel" class="tab-pane" id="contacts">
        Contacts panel
      </div>
    </div>
  </div>
{% endblock %}
